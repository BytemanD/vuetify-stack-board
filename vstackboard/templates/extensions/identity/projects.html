<v-row>
  <v-col>
    <v-btn small color="primary" @click="identity.projectTable.openNewItemDialog()">创建</v-btn>
    <v-btn small color="error" @click="identity.projectTable.deleteSelected()">删除</v-btn>
    <v-btn small color="info" v-on:click="identity.rolesDialog.open()">角色管理</v-btn>
  </v-col>
  <v-col>
    <v-text-field small dense v-model="identity.projectTable.search" append-icon="mdi-magnify" label="搜索"
        single-line hide-details></v-text-field>
  </v-col>
  <v-col cols="1" class="text-center">
    <v-btn fab x-small color="info" v-on:click="identity.projectTable.refresh()"><v-icon>mdi-refresh</v-icon></v-btn>
  </v-col>
</v-row>
<br>
<v-data-table :headers="identity.projectTable.headers" :items="identity.projectTable.items"
  :items-per-page="identity.projectTable.itemsPerPage" :search="identity.projectTable.search"
  dense show-select v-model="identity.projectTable.selected" show-expand single-expand>
  <template v-slot:item.name="{ item }">
    [[ item.name || item.id ]]
  </template>
  <template v-slot:item.enabled="{ item }">
    <v-icon color="success" v-if="item.enabled == true">mdi-check-circle</v-icon>
    <v-icon color="error" v-else>mdi-close-circle</v-icon>
  </template>
  <template v-slot:item.actions="{ item }">
    <v-btn text color="purple" @click="identity.projectUserDialog.open(item)">用户管理</v-btn>
  </template>

  <template v-slot:expanded-item="{ headers, item }">
    <td></td><td></td>
    <td :colspan="headers.length -1" >
      <table>
        <template v-for="extendItem in identity.projectTable.extendItems">
          <tr><td><strong>[[extendItem.text ]]:</strong> </td><td>[[ item[extendItem.value] ]]</td></tr>
        </template>
      </table>
    </td>
  </template>
</v-data-table>

{% include '../dialog/projectUsers.html' %}
{% include '../dialog/newProject.html' %}
{% include '../dialog/rolesDialog.html' %}
