<v-row>
  <v-col>
    <v-btn small color="primary" @click="computing.aggTable.newItemDialog.open()"><v-icon small>mdi-plus</v-icon></v-btn>
    <v-btn small color="error" @click="computing.aggTable.deleteSelected()" :disabled="computing.aggTable.selected.length == 0"><v-icon small>mdi-trash-can</v-icon> 删除</v-btn>
    <!-- <v-btn small color="warning" @click="">节点管理</v-btn> -->
  </v-col>
  <v-col>
    <v-text-field small dense v-model="computing.aggTable.search" append-icon="mdi-magnify" label="搜索" single-line hide-details></v-text-field>
  </v-col>
  <v-col cols="1" class="text-center">
    <v-btn fab x-small color="info" v-on:click="computing.aggTable.refresh()" ><v-icon>mdi-refresh</v-icon></v-btn>
  </v-col>
</v-row>
<br>
<v-data-table :headers="computing.aggTable.headers" :items="computing.aggTable.items"
    :items-per-page="computing.aggTable.itemsPerPage" :search="computing.aggTable.search" class="elevation-1" dense
    show-select v-model="computing.aggTable.selected" show-expand single-expand>
    <template v-slot:item.host_num="{ item }">
      <v-btn small text color="info" @click="computing.aggTable.aggHostsDialog.open(item)">[[ item.hosts.length ]]</v-btn>
    </template>
    <template v-slot:expanded-item="{ headers, item }">
      <td></td><td></td>
      <td :colspan="headers.length -1" >
        <table>
          <template v-for="extendItem in computing.aggTable.extendItems">
            <tr><td><strong>[[ extendItem.text ]]:</strong> </td><td>[[ item[extendItem.value] ]]</td></tr>
          </template>
        </table>
      </td>
    </template>
</v-data-table>

{% include '../dialog/newAgg.html' %}
{% include '../dialog/aggHosts.html' %}
